import{M as P,T as U}from"./api-FPXnogbV.js";import{h as v}from"./moment-C5S46NFB.js";/* empty css                                                                      */import{_ as A,r as _,p as O,o as R,n as q,a as J,c as p,b as g,g as c,F as k,d as K,h as Q,t as m}from"./index-B9F-ExNe.js";const Y={class:"match-carousel"},Z={key:0,class:"match-card"},tt={class:"row"},et={class:"col-12 header-wrapper"},st={class:"d-flex justify-content-center"},nt={class:"liga text-center"},at={class:"match-date"},ot={class:"match-content"},rt={class:"scores-row"},ct={class:"score"},it={class:"score"},lt={class:"teams-row"},dt={class:"team"},ut={class:"team"},ht=["innerHTML"],vt={key:1,class:"match-card tournament-result"},mt={class:"row"},ft={class:"col-12 header-wrapper"},_t={class:"d-flex justify-content-center"},pt={class:"liga text-center"},gt={class:"match-date"},yt={class:"tournament-content"},xt={key:0,class:"place-result"},Mt={key:1,class:"place-result"},wt={class:"team-name"},Dt=["innerHTML"],Tt={__name:"MatchCarousel",setup(Lt){const M=["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],X=(t,s)=>{const e=v(t),n=v(s),a=e.format("D"),o=n.format("D"),r=e.month(),l=n.month(),I=M[r],F=M[l];return r===l?`${a} - ${o} ${I}`:`${a} ${I} - ${o} ${F}`},E=t=>{const s=v(t),e=s.format("D"),n=s.month(),a=M[n];return`${e} ${a}`},L=t=>{if(!t)return"";const s=t.split(",");if(s.length>=2){const e=s[0].trim(),n=s.slice(1).join(",").trim();return`${e},<br>${n}`}return t},$=_([]),S=async()=>{const t=await U.getList({is_hidden:!1});$.value=t.reverse()},b=_([]),W=async()=>{const t=await P.getList({is_hidden:!1});b.value=t.reverse()},u=_([]),z=()=>{const t=[];b.value.forEach(s=>{s&&s.date&&t.push({...s,type:"match",sortDate:v(s.date)})}),$.value.forEach(s=>{s&&s.date_start&&t.push({...s,type:"tournament",sortDate:v(s.date_start)})}),t.sort((s,e)=>s.sortDate.diff(e.sortDate)),t.forEach(s=>delete s.sortDate),u.value=t},G=()=>{if(u.value.length===0)return 0;const t=v();let s=0,e=1/0;for(let a=0;a<u.value.length;a++){const o=u.value[a];if(!o||!o.type)continue;const r=o.type==="match"?v(o.date):v(o.date_start),l=Math.abs(r.diff(t));l<e&&(e=l,s=a)}const n=u.value[s];return!n||!n.type?0:(n.type==="match"?v(n.date):v(n.date_start),s)},i=_(null),f=_(!1),x=_(0),h=_(0),d=_(0),w=()=>window.innerWidth<=768?300:400,D=()=>window.innerWidth<=768?20:40;O(()=>i.value?i.value.children.length:6);const y=()=>{const t=u.value.length;if(t===0)return[0];if(window.innerWidth<=768){const s=[],e=w(),n=D(),a=e+n,o=Math.max(0,t-1);for(let r=0;r<=o;r++){const l=-r*a;s.push(l)}return s}else{const s=[],e=w(),n=D(),a=e+n,o=(window.innerWidth-e)/2-50;for(let r=0;r<t;r++){const l=o-r*a;s.push(l)}return s}},H=t=>{f.value=!0,x.value=t.pageX-i.value.offsetLeft,h.value=d.value,i.value.style.cursor="grabbing",i.value.style.transition="none"},j=t=>{if(!f.value)return;t.preventDefault();const e=(t.pageX-i.value.offsetLeft-x.value)*1,n=h.value+e,a=y(),o=Math.max(...a),r=Math.min(...a);d.value=Math.max(r,Math.min(o,n)),i.value.style.transform=`translateX(${d.value}px)`},C=()=>{if(!f.value)return;f.value=!1,i.value.style.cursor="grab",i.value.style.transition="transform 0.3s ease";const t=y(),s=d.value-h.value,e=50;let n=0,a=Math.abs(h.value-t[0]);for(let r=1;r<t.length;r++){const l=Math.abs(h.value-t[r]);l<a&&(a=l,n=r)}let o=n;s>e&&n>0?o=n-1:s<-e&&n<t.length-1&&(o=n+1),d.value=t[o],i.value.style.transform=`translateX(${d.value}px)`},B=t=>{f.value=!0,x.value=t.touches[0].pageX-i.value.offsetLeft,h.value=d.value,i.value.style.transition="none"},N=t=>{if(!f.value)return;t.preventDefault();const e=(t.touches[0].pageX-i.value.offsetLeft-x.value)*1,n=h.value+e,a=y(),o=Math.max(...a),r=Math.min(...a);d.value=Math.max(r,Math.min(o,n)),i.value.style.transform=`translateX(${d.value}px)`},V=()=>{if(!f.value)return;f.value=!1,i.value.style.transition="transform 0.3s ease";const t=y(),s=d.value-h.value,e=50;let n=0,a=Math.abs(h.value-t[0]);for(let r=1;r<t.length;r++){const l=Math.abs(h.value-t[r]);l<a&&(a=l,n=r)}let o=n;s>e&&n>0?o=n-1:s<-e&&n<t.length-1&&(o=n+1),d.value=t[o],i.value.style.transform=`translateX(${d.value}px)`},T=()=>{if(!i.value||u.value.length===0)return;const t=w(),s=D(),e=u.value.length*t+(u.value.length-1)*s;i.value.style.width=`${e}px`;const n=y(),a=G();if(n.length>0){const o=Math.min(a,n.length-1);d.value=n[o],i.value.style.transform=`translateX(${d.value}px)`}};return R(async()=>{try{await Promise.all([W(),S()]),z(),await q(),T(),window.addEventListener("resize",T)}catch(t){console.error("Ошибка при загрузке данных:",t)}}),J(()=>{window.removeEventListener("resize",T)}),(t,s)=>(g(),p("div",Y,[c("div",{class:"match-cards",ref_key:"matchCards",ref:i,onMousedown:H,onMousemove:j,onMouseup:C,onMouseleave:C,onTouchstart:B,onTouchmove:N,onTouchend:V},[(g(!0),p(k,null,K(u.value,e=>(g(),p(k,{key:`${e.type}-${e.id}`},[e&&e.type==="match"?(g(),p("div",Z,[c("div",tt,[c("div",et,[c("div",st,[c("div",nt,m(e.league),1)]),c("div",at,m(E(e.date)),1)])]),c("div",ot,[c("div",rt,[c("div",ct,m(e.score_team_a),1),s[0]||(s[0]=c("div",{class:"score-divider"},":",-1)),c("div",it,m(e.score_team_b),1)]),c("div",lt,[c("div",dt,m(e.team_a),1),c("div",ut,m(e.team_b),1)])]),c("div",{class:"match-location",innerHTML:L(e.venue)},null,8,ht)])):e&&e.type==="tournament"?(g(),p("div",vt,[c("div",mt,[c("div",ft,[c("div",_t,[c("div",pt,m(e.league),1)]),c("div",gt,m(X(e.date_start,e.date_end)),1)])]),c("div",yt,[e.position?(g(),p("div",xt,m(e.position)+" МЕСТО",1)):(g(),p("div",Mt,"-")),c("div",wt,m(e.team),1)]),c("div",{class:"match-location",innerHTML:L(e.venue)},null,8,Dt)])):Q("",!0)],64))),128))],544)]))}},kt=A(Tt,[["__scopeId","data-v-3a9b17d3"]]);export{kt as M};
